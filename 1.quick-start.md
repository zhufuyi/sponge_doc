### ğŸ·å®‰è£… sponge

> [!tip] å®‰è£…spongeä¹‹å‰éœ€è¦å…ˆå®‰è£…`go`å’Œ`protoc`ã€‚

**âœ… å®‰è£… go**

ä¸‹è½½goåœ°å€ï¼š [https://studygolang.com/dl](https://studygolang.com/dl)

> [!note] è¦æ±‚1.16ä»¥ä¸Šç‰ˆæœ¬ï¼ŒæŠŠ`go install`å‘½ä»¤ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨ç›®å½•(é€šå¸¸æ˜¯$GOPATH/bin)æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡pathã€‚

æŸ¥çœ‹goç‰ˆæœ¬ `go version`

<br>

**âœ… å®‰è£… protoc**

ä¸‹è½½protocåœ°å€ï¼š [https://github.com/protocolbuffers/protobuf/releases/tag/v3.20.3](https://github.com/protocolbuffers/protobuf/releases/tag/v3.20.3)

> [!note] è¦æ±‚v3.20ä»¥ä¸Šç‰ˆæœ¬ï¼ŒæŠŠ protoc äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨ç›®å½•(å»ºè®®æ˜¯$GOPATH/bin)æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡pathã€‚

æŸ¥çœ‹protocç‰ˆæœ¬: `protoc --version`


<br>

**âœ… å®‰è£… sponge**

å®‰è£…å®Œgoå’Œprotocä¹‹åï¼Œæ¥ä¸‹æ¥å®‰è£…spongeï¼Œæ”¯æŒåœ¨windowsã€macã€linuxç¯å¢ƒå®‰è£…ã€‚

> [!tip] å¦‚æœä¸èƒ½ç§‘å­¦ä¸Šç½‘ï¼Œå®‰è£…spongeæ—¶ï¼Œè·å–githubçš„åº“ä¼šé‡åˆ°è¶…æ—¶å¤±è´¥é—®é¢˜ï¼Œå»ºè®®è®¾ç½®ä¸ºå›½å†…ä»£ç†ï¼Œæ‰§è¡Œå‘½ä»¤ **go env -w GOPROXY=https://goproxy.cn,direct**

<!-- tabs:start -->

#### **Windowsç¯å¢ƒ**

> [!note] åœ¨windowsç¯å¢ƒä¸­éœ€è¦å®‰è£…mingw64ã€makeã€cmderæ¥æ”¯æŒlinuxå‘½ä»¤ç¯å¢ƒæ‰å¯ä»¥ä½¿ç”¨spongeã€‚

**âœ… å®‰è£… mingw64**

ä¸‹è½½mingw64åœ°å€ï¼š [x86_64-8.1.0-release-posix-seh-rt_v6-rev0.7z](https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/8.1.0/threads-posix/seh/x86_64-8.1.0-release-posix-seh-rt_v6-rev0.7z)

ä¸‹è½½åè§£å‹åˆ°`D:\Program Files\mingw64`ç›®å½•ï¼ŒæŠŠlinuxå¸¸ç”¨å‘½ä»¤æ‰€åœ¨çš„ç›®å½•`D:\Program Files\mingw64\bin`æ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡PATHã€‚

<br>

**âœ… å®‰è£… make å‘½ä»¤**

åˆ‡æ¢åˆ°`D:\Program Files\mingw64\bin`ç›®å½•ï¼Œæ‰¾åˆ°`mingw32-make.exe`å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¤åˆ¶å¹¶æ”¹åä¸º`make.exe`ã€‚

æŸ¥çœ‹makeç‰ˆæœ¬ï¼š`make -v`

<br>

**âœ… å®‰è£… cmder**

ä¸‹è½½cmderåœ°å€ï¼š [cmder-v1.3.20.zip](https://github.com/cmderdev/cmder/releases/download/v1.3.20/cmder.zip)

ä¸‹è½½åè§£å‹åˆ°`D:\Program Files\cmder`ç›®å½•ä¸‹ï¼Œå¹¶æŠŠç›®å½•`D:\Program Files\cmder`æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡pathã€‚

å¯¹cmderè¿›è¡Œç®€å•çš„é…ç½®ï¼š

- **é…ç½®é¼ æ ‡å³é”®å¯åŠ¨cmder**ï¼ŒæŒ‰ä¸‹ç»„åˆé”®`win+x`ï¼Œå†æŒ‰å­—æ¯`a`è¿›å…¥æœ‰ç®¡ç†æƒé™çš„ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤`Cmder.exe /REGISTER ALL`ã€‚ éšä¾¿åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡ŒæŒ‰ä¸‹é¼ æ ‡å³é”®ï¼Œé€‰æ‹©`Cmder Here`å³å¯æ‰“å¼€cmderç•Œé¢ã€‚
- **è§£å†³è¾“å…¥å‘½ä»¤æ—¶çš„ç©ºæ ¼é—®é¢˜**ï¼Œæ‰“å¼€cmderç•Œé¢ï¼ŒæŒ‰ä¸‹ç»„åˆé”®win+alt+pè¿›å…¥è®¾ç½®ç•Œé¢ï¼Œåœ¨å·¦ä¸Šè§’æœç´¢`Monospace`ï¼Œå–æ¶ˆå‹¾é€‰ï¼Œä¿å­˜é€€å‡ºã€‚

> [!attention] åœ¨windowsç¯å¢ƒä½¿ç”¨spongeå¼€å‘é¡¹ç›®ï¼Œä¸ºäº†é¿å…æ‰¾ä¸åˆ°linuxå‘½ä»¤é”™è¯¯ï¼Œè¯·ä½¿ç”¨cmderï¼Œä¸è¦ç”¨ç³»ç»Ÿè‡ªå¸¦çš„cmdç»ˆç«¯ã€Golandå’ŒVS Codeä¸‹çš„ç»ˆç«¯ã€‚

æ‰“å¼€`cmder.exe`ç»ˆç«¯ï¼Œæ£€æŸ¥æ˜¯å¦æ”¯æŒå¸¸ç”¨çš„linuxå‘½ä»¤ã€‚

```bash
ls --version
make --version
cp --version
chmod --version
rm --version
```

<br>

**âœ… å®‰è£… sponge**

æ‰“å¼€`cmder.exe`ç»ˆç«¯(ä¸æ˜¯windowsè‡ªå¸¦çš„cmd)ï¼Œæ‰§è¡Œå‘½ä»¤å®‰è£…spongeï¼š

```bash
# å®‰è£…sponge
go install github.com/zhufuyi/sponge/cmd/sponge@latest

# åˆå§‹åŒ–spongeï¼Œè‡ªåŠ¨å®‰è£…spongeä¾èµ–æ’ä»¶
sponge init

# æŸ¥çœ‹æ’ä»¶æ˜¯å¦éƒ½å®‰è£…æˆåŠŸï¼Œå¦‚æœå‘ç°æœ‰æ’ä»¶æ²¡æœ‰å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œå‘½ä»¤é‡è¯• sponge tools --install
sponge tools

# æŸ¥çœ‹spongeç‰ˆæœ¬
sponge -v
```

#### **Macç¯å¢ƒ**

åœ¨macç¯å¢ƒå®‰è£…spongeã€‚

```bash
# å®‰è£…sponge
go install github.com/zhufuyi/sponge/cmd/sponge@latest

# åˆå§‹åŒ–spongeï¼Œè‡ªåŠ¨å®‰è£…spongeä¾èµ–æ’ä»¶
sponge init

# æŸ¥çœ‹æ’ä»¶æ˜¯å¦éƒ½å®‰è£…æˆåŠŸï¼Œå¦‚æœå‘ç°æœ‰æ’ä»¶æ²¡æœ‰å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œå‘½ä»¤é‡è¯• sponge tools --install
sponge tools

# æŸ¥çœ‹spongeç‰ˆæœ¬
sponge -v
```

#### **Linuxç¯å¢ƒ**

åœ¨linuxç¯å¢ƒå®‰è£…spongeã€‚

```bash
# å®‰è£…sponge
go install github.com/zhufuyi/sponge/cmd/sponge@latest

# åˆå§‹åŒ–spongeï¼Œè‡ªåŠ¨å®‰è£…spongeä¾èµ–æ’ä»¶
sponge init

# æŸ¥çœ‹æ’ä»¶æ˜¯å¦éƒ½å®‰è£…æˆåŠŸï¼Œå¦‚æœå‘ç°æœ‰æ’ä»¶æ²¡æœ‰å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œå‘½ä»¤é‡è¯• sponge tools --install
sponge tools

# æŸ¥çœ‹spongeç‰ˆæœ¬
sponge -v
```

<!-- tabs:end -->

> [!tip] å‡çº§æœ€æ–°spongeæ¡†æ¶ç‰ˆæœ¬ï¼Œæ‰§è¡Œå‘½ä»¤ `sponge upgrade`

<br>

### ğŸ·å¯åŠ¨sponge UIç•Œé¢æœåŠ¡

sponge æ”¯æŒä¸°å¯Œçš„ç”Ÿæˆä»£ç å‘½ä»¤ï¼Œéƒ¨åˆ†å¸¸ç”¨çš„ç”Ÿæˆä»£ç å‘½ä»¤éƒ½æœ‰å¯¹åº”çš„UIç•Œé¢ï¼ŒUIç•Œé¢æœ‰è®°å¿†åŠŸèƒ½ã€æœ‰å‚æ•°è¯¦ç»†çš„è¯´æ˜ã€æœ‰ç”Ÿæˆä»£ç åçš„ä½¿ç”¨æ­¥éª¤è¯´æ˜ï¼Œå› æ­¤ä½¿ç”¨UIç•Œé¢æ›´åŠ ç®€å•æ˜“ç”¨ã€‚

æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š

```bash
sponge run
```

åœ¨æµè§ˆå™¨è®¿é—® http://localhost:24631 ï¼Œè¿›å…¥spongeç”Ÿæˆä»£ç çš„UIç•Œé¢ã€‚

> [!note] åœ¨spongeçš„UIç•Œé¢åªæ”¯æŒåœ¨æœ¬åœ°ç”Ÿæˆä»£ç ï¼Œä¸æ”¯æŒè·¨ipï¼ŒåŸå› æ˜¯æŠŠå‰ç«¯æ–‡ä»¶(htmlã€jsã€css)å’Œåç«¯æœåŠ¡ç»Ÿä¸€ç¼–è¯‘åˆ°äº†spongeå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå‰ç«¯çš„jsä½¿ç”¨é»˜è®¤ip `127.0.0.1` ä¸å¯æ”¹å˜ã€‚å¦‚æœéœ€è¦è¿œç¨‹éƒ¨ç½²sponge UIæœåŠ¡ï¼Œè¯·ä¸‹è½½spongeæºç ï¼Œæœç´¢å­—æ®µ`spongeServiceAddr`ï¼Œé…ç½®æˆä½ çš„IPåœ°å€æˆ–åŸŸåï¼Œæœ€åç¼–è¯‘å‡ºæ–°çš„spongeå¯æ‰§è¡Œæ–‡ä»¶ï¼Œéƒ¨ç½²åˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šã€‚

åœ¨sponge UIç•Œé¢ä¸Šæ”¯æŒ5ç§æ–¹å¼åˆ›å»ºé¡¹ç›®ï¼Œ åˆ†åˆ«æ˜¯:

- `â“µåŸºäºsqlåˆ›å»ºçš„webæœåŠ¡`
- `â“¶åŸºäºsqlåˆ›å»ºçš„å¾®æœåŠ¡`
- `â“·åŸºäºprotobufåˆ›å»ºçš„webæœåŠ¡`
- `â“¸åŸºäºprotobufåˆ›å»ºçš„å¾®æœåŠ¡`
- `â“¹åŸºäºprotobufåˆ›å»ºçš„rpcç½‘å…³æœåŠ¡`

æ¯ç§æ–¹å¼åˆ›å»ºçš„é¡¹ç›®ä½¿ç”¨åœºæ™¯åœ¨[ç”Ÿæˆä»£ç æ¡†æ¶](https://go-sponge.com/zh-cn/framework-design?id=%f0%9f%8f%b7%e7%94%9f%e6%88%90%e4%bb%a3%e7%a0%81%e6%a1%86%e6%9e%b6)ç« èŠ‚ä¸­ä»‹ç»ï¼Œæ ¹æ®é¡¹ç›®å®é™…éœ€è¦é€‰æ‹©å…¶ä¸­ä¸€ç§æ–¹å¼å³å¯ã€‚åœ¨sponge UIç•Œé¢è¿˜æ”¯æŒç”Ÿæˆå¤šç§å…¬å…±ä»£ç ï¼Œè¿™äº›å…¬å…±ä»£ç éƒ½å¯ä»¥æ— ç¼åµŒå…¥åˆ°é¡¹ç›®ä»£ç ä¸­ï¼Œé™¤äº†åœ¨UIç•Œé¢ç”Ÿæˆä»£ç ï¼Œæ›´å¤šç”Ÿæˆä»£ç å‘½ä»¤é›†æˆåœ¨é¡¹ç›®ä»£ç ä¸‹çš„Makefileæ–‡ä»¶ä¸­ï¼Œé€šè¿‡Makefileç”Ÿæˆçš„ä»£ç éƒ½æ˜¯æ— ç¼åµŒå…¥åˆ°é¡¹ç›®ä»£ç ä¸­ã€‚è¿™ä¹ˆå¤šç”Ÿæˆä»£ç å‘½ä»¤ç›®çš„æ˜¯å°½å¯èƒ½è®©golangä¹Ÿå¯ä»¥å®ç°"ä½ä»£ç å¼€å‘"ã€‚

<br>

### ğŸ·åˆ›å»ºé¡¹ç›®ç¤ºä¾‹

ä¸‹é¢ä½¿ç”¨`â“µåŸºäºsqlåˆ›å»ºçš„webæœåŠ¡`æ–¹å¼æ¥åˆ›å»ºé¡¹ç›®ç¤ºä¾‹ï¼Œä¹Ÿæ˜¯5ç§æ–¹å¼ä¸­åˆ›å»ºé¡¹ç›®æœ€ç®€å•ä¹‹ä¸€ï¼Œä¸éœ€è¦ç¼–å†™ä»»ä½•ä¸€è¡Œgoä»£ç ï¼Œåªéœ€è¿æ¥mysqlæ•°æ®åº“ï¼Œå°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªçº¿ä¸Šéƒ¨ç½²çš„å®Œæ•´webæœåŠ¡é¡¹ç›®ï¼ŒwebæœåŠ¡çš„apiæ¥å£åŒ…æ‹¬äº†æ ‡å‡†åŒ–çš„`CRUD`ã€`ä»»æ„æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢`ã€`ç¼“å­˜`ï¼Œä¹ŸåŒ…æ‹¬äº†ä¸°å¯Œçš„ç»„ä»¶ï¼Œå¼€ç®±å³ç”¨ã€‚

> [!tip] ç”Ÿæˆä»£ç éœ€è¦ä¾èµ–mysqlæœåŠ¡å’Œmysqlè¡¨ï¼Œå¦‚æœéƒ½æ²¡æœ‰å‡†å¤‡å¥½ï¼Œè¿™é‡Œæœ‰[dockerå¯åŠ¨mysqlæœåŠ¡è„šæœ¬](https://github.com/zhufuyi/sponge/blob/main/test/server/mysql/docker-compose.yaml)ï¼Œå¯åŠ¨mysqlæœåŠ¡ä¹‹åå¯¼å…¥[mysqlè¡¨sql](https://github.com/zhufuyi/sponge_examples/blob/main/1_web-gin-CRUD/test/sql/user.sql)ã€‚

è¿›å…¥spongeçš„UIç•Œé¢ï¼Œç‚¹å‡»å·¦è¾¹èœå•æ ã€SQLã€‘--> ã€åˆ›å»ºwebé¡¹ç›®ã€‘ï¼Œå¡«å†™`mysql dsnåœ°å€`ï¼Œç„¶åç‚¹å‡»`è·å–è¡¨å`ï¼Œæ¥ç€å¡«å†™å…¶ä»–å‚æ•°ï¼Œé¼ æ ‡æ”¾åœ¨é—®å·`?`ä½ç½®æŸ¥çœ‹å‚æ•°è¯´æ˜ï¼Œå¡«å†™å®Œå‚æ•°åï¼Œç‚¹å‡»æŒ‰é’®`ä¸‹è½½ä»£ç `ç”ŸæˆwebæœåŠ¡å®Œæ•´é¡¹ç›®ä»£ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![web-http](assets/images/web-http.png)

è§£å‹ä»£ç æ–‡ä»¶ï¼Œè¿™æ˜¯åˆ›å»ºçš„useré¡¹ç›®ä»£ç ç›®å½•ï¼š

```
.
â”œâ”€ build
â”œâ”€ cmd
â”‚   â””â”€ user
â”‚       â”œâ”€ initial
â”‚       â””â”€ main.go
â”œâ”€ configs
â”œâ”€ deployments
â”‚   â”œâ”€ binary
â”‚   â”œâ”€ docker-compose
â”‚   â””â”€ kubernetes
â”œâ”€ docs
â”œâ”€ internal
â”‚   â”œâ”€ cache
â”‚   â”œâ”€ config
â”‚   â”œâ”€ dao
â”‚   â”œâ”€ ecode
â”‚   â”œâ”€ handler
â”‚   â”œâ”€ model
â”‚   â”œâ”€ routers
â”‚   â”œâ”€ server
â”‚   â””â”€ types
â””â”€ scripts
```

æ‰“å¼€ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°ä»£ç ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š

```bash
# ç”Ÿæˆswaggeræ–‡æ¡£
make docs

# ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡
make run
```

åœ¨æµè§ˆå™¨æ‰“å¼€ [http://localhost:8080/swagger/index.html](http://localhost:8080/swagger/index.html)ï¼Œåœ¨é¡µé¢ä¸Šè¿›è¡Œå¢åˆ æ”¹æŸ¥apiæ¥å£æµ‹è¯•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![web-http-swagger](assets/images/web-http-swagger.png)

<br>

`â“µåŸºäºsqlåˆ›å»ºçš„webæœåŠ¡`åªèƒ½é€‰æ‹©ä¸€ä¸ªmysqlè¡¨æ¥åˆ›å»ºé¡¹ç›®ä»£ç ï¼Œå¦‚æœæœ‰å¤šä¸ªmysqlè¡¨ï¼Œå¦‚ä½•æ‰¹é‡ç”Ÿæˆæ ‡å‡†åŒ–çš„CRUD apiæ¥å£ä»£ç æ— ç¼åµŒå…¥åˆ°é¡¹ç›®ä»£ç å‘¢ï¼Ÿå¦‚æœæƒ³æ–°å¢éæ ‡å‡†åŒ–CRUDçš„è‡ªå®šä¹‰apiæ¥å£ï¼Œåˆå¦‚ä½•æ“ä½œå‘¢ï¼Ÿåœ¨[webå¼€å‘(mysql)](https://go-sponge.com/zh-cn/web-development-mysql)ç« èŠ‚ä¸­è¯¦ç»†ä»‹ç»ã€‚

> [!tip] å…±æœ‰5ç§æ–¹å¼åˆ›å»ºä¸åŒç±»å‹é¡¹ç›®ï¼Œåœ¨åé¢çš„ç« èŠ‚ä¸­è¯¦ç»†ä»‹ç»ã€‚

<br>
